<!DOCTYPE html>
<html lang=”en-US”>

<head>
    <link rel="stylesheet" type="text/css" href="surgeo.css">
    <link rel="stylesheet" href="#jquery-ui.css">
    <script src="jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="jquery-ui.js" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset=”UTF-8”>
    <title>Surgeo</title>
    <meta name=”description” content=”Surgeo GUI”>
    <meta name=”author” content=”Theo Naunheim”>
    <link rel="icon" type="image/png" href="favicon.png" />
</head>

<body>

    <div id="page_content" class="content">

        <header>
            <h1>&nbsp;&nbsp;&gt;&gt;&gt;</h1>
        </header>

        <div id="title_pane">
            <img src="beta_in_perpetuity_logo.png" alt="perpetuity_logo" height=40% width=40% align="right">
            <h1><br>Surgeo.</h1>
        </div>

        <div id="ajax_pane" class="ajax">    
        <!-- Ajax -->
    
        <div id="presentation_pane" align="center">
            <form id="submissionForm">
                <img id="landingLogo" onclick="javascript:submit()" src="logo.png" alt="surgeo_logo" height=50% width=50% align="middle" border="5">
                <input type="hidden" name="thisTemplate" value="landing">
                <input type="hidden" name="command" value="changePage">
                <input type="hidden" name="arguments" value="interactive">
            </form>
        </div>

        <!-- Ajax -->
        </div>
        
        <!-- Loading animation -->
        <div id="loader" class="loading_animation">
            <p>
            <img src="beta_in_perpetuity_wallpaper.png" alt="Loading" height=10% width=10%>
            <font color=#333333>Loading ...</font>
            </p>
        </div>

        <script>
            // Universal interval_id for setInterval events
            var interval_id;
            // Set up ajax on load. Kludge prevent show. #TODO
            $(document).ready(function() {	
	            $.ajax();					
            });
            // Bind 'enter' to button events for page
            $(document).keypress(function(event) {
                if (event.keyCode == 13) {
                    $("#submitButton").click();
                    submit();
                }
            });
        </script>

        <script>
            // On ajax start, blink
            $(document).ajaxStart(function(){
	            $("#loader").hide();
//	            $("#ajax_pane").hide();
	            interval_id = setInterval(function(){
	                $("#loader").show().fadeIn(1000);
	                $("#loader").show().fadeOut(1000);}, 0)
            });
        </script>

        <script>
            // On ajax end, stop blinking.
            $(document).ajaxStop(function(){
//    	        $("#ajax_pane").show().fadeIn(1000);
    	        clearInterval(interval_id);
            });
        </script>
        
        <script>
            // Submission
            $(document).ready(function(){
                $("#submitButton").click(function(){
                    submit();
                });
            });
        </script>
    
        <script>
            // Function submission
            function submit(serializedArray) {
            
                // Get array info
                var formArray = $("#submissionForm").serialize();
                
                // Send request
                var request = $.ajax({
                    url: "http://localhost:8001",
                    type: "POST",
                    data: {formArray},
                    dataType: "html"
                });
                
                // Empty ajax pane
                $("#ajax_pane").empty();
                
                request.done(function(data) {
                    $("#ajax_pane").html(data);
                });
                
                request.fail(function(jqXHR, textStatus) {
                    alert("An error has occcured: " + textStatus);
                });
            }
        </script>

        <script>
            // Interactive tab
            function interactive_func() {
                $("#submissionForm").replaceWith('<input type="hidden" name="thisTemplate" value="menu">\
                                                 <input type="hidden" name="command" value="changePage">\
                                                 <input type="hidden" name="arguments" value="interactive">'
                );
                submit();   
            }

            // Settings tab
            function settings_func() {
                $("#submissionForm").replaceWith('<input type="hidden" name="thisTemplate" value="menu">\
                                                 <input type="hidden" name="command" value="changePage">\
                                                 <input type="hidden" name="arguments" value="settings">'
                );
                submit();
            }

            // CSV tab
            function csv_func() {
                $("#submissionForm").replaceWith('<input type="hidden" name="thisTemplate" value="menu">\
                                                 <input type="hidden" name="command" value="changePage">\
                                                 <input type="hidden" name="arguments" value="csv">'
                ); 
                submit();  
            }
        </script>

</body>
</html>

