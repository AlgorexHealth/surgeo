<!DOCTYPE html>
<html lang=”en-US”>

<head>
    <link rel="stylesheet" type="text/css" href="surgeo.css">
    <script src="jquery-1.11.1.min.js" type="text/javascript"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset=”UTF-8”>
    <title>Surgeo</title>
    <meta name=”description” content=”Surgeo GUI”>
    <meta name=”author” content=”Theo Naunheim”>
    <link rel="icon" type="image/png" href="favicon.png" />
</head>

<body>

    <div id="page_content" class="content">

        <header>
            <h1>&nbsp;&nbsp;&gt;&gt;&gt;</h1>
        </header>

        <div id="body_text" class="content" height=200px>
            <img src="beta_in_perpetuity_logo.png" alt="perpetuity_logo" height=200px width=400px align="right">

        <div id="ajax_pane" class="ajax">    
        <!-- Ajax -->
    
        <form name="submissionForm">
            <img src="logo.png" alt="surgeo_logo" height=10% width=10% align="right">
            <input type="hidden" name="submittedFrom" value="landing">
            <input type="hidden" name="nextTemplate" value="">
        </form>

        <!-- Ajax -->
        </div>
        </div>
        
        <!-- Loading animation -->
        <div id="loader" class="loading_animation">
            <p>
            <img src="beta_in_perpetuity_wallpaper.png" alt="Loading" align="center" height=10% width=10%>
            <font color=#333333>Loading ...</font>
            </p>
        </div>

        <script>
            // Universal interval_id for setInterval events
            var interval_id
            // Set up ajax on load. Kludge prevent show. #TODO
            $(document).ready(function() {	
	            $.ajax();					
            });
            // Bind 'enter' to button events for page
            $(document).keypress(function(event) {
                if (event.keyCode == 13) {
                    $("#submitButton").click();
                    submit()
                }
            });
        </script>

        <script>
            // On ajax start, blink
            $(document).ajaxStart(function(){
	            $("#loader").hide();
	            $("#ajax_pane").hide();
	            interval_id = setInterval(function(){
	                $("#loader").show().fadeIn(1000);
	                $("#loader").show().fadeOut(1000);}, 0)
            });
        </script>

        <script>
            // On ajax end, stop blinking.
            $(document).ajaxStop(function(){
    	        $("#ajax_pane").show().fadeIn(1000);
    	        clearInterval(interval_id);
            });
        </script>
        
        <script>
            // Submission
            $(document).ready(function(){
                $("#submitButton").click(function(){
                    var formArray = $(":input").serializeArray();
                    submit(formArray);
                });
            });
        </script>
    
        <script>
        // Function submission
        function submit(serializedArray) {
            // Send request
            var request = $.ajax({
                url: "http://localhost:8001",
                type: "POST",
                data: {serializedArray},
                dataType: "html"
            });
            // Empty ajax pane
            $("#ajax_pane").empty();
            request.done(function(data) {
            $("#log").html(msg);
            });
            request.fail(function(jqXHR, textStatus) {
                alert("An error has occcured: " + textStatus);
            });
        }
        </script>



</body>
</html>

